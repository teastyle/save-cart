<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css" />
    <title>useReducer</title>
</head>
<body>
    <div class="root">
        <div class="main">
            <nav>
                <div class="head">
                    <h3>UseReducer</h3>
                    <div class="nav-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M16 6v2h2l2 12H0L2 8h2V6a6 6 0 1 1 12 0zm-2 0a4 4 0 1 0-8 0v2h8V6zM4 10v2h2v-2H4zm10 0v2h2v-2h-2z"></path></svg><div class="amount-container"><p class="total-amount" id="count-x"></p></div></div>
                </div>
            </nav>
            
            <section class="cart">
                <div class="title">
                    <h2>YOUR BAG</h2>
                </div>
                <div>
                    <article class="cart-item">
                        <img src="https://dl.airtable.com/.attachments/64b266ad865098befbda3c3577a773c9/24497852/yedjpkwxljtb75t3tezl.png" alt="Samsung Galaxy S8"><div><h4>Samsung Galaxy S8</h4>
                            <h4 class="item-price" id="price-1">$399.99</h4>
                            <button class="remove-btn" onclick="remove(0)">remove</button>
                        </div>
                        <div>
                            <button class="amount-btn" onclick="plus(0)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"></path></svg></button>
                            <p class="amount"></p><button class="amount-btn" onclick="minus(0)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg></button>
                        </div>
                    </article>
                    <article class="cart-item">
                        <img src="https://dl.airtable.com/.attachments/91c88ae8c1580e2b762ecb3f73ed1eed/a633139a/phone-1_gvesln.png" alt="Samsung Galaxy S8"><div><h4>Google Pixel</h4>
                            <h4 class="item-price" id="price-2">$499.99</h4>
                            <button class="remove-btn" onclick="remove(1)">remove</button>
                        </div>
                        <div>
                            <button class="amount-btn" onclick="plus(1)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"></path></svg></button>
                            <p class="amount"></p><button class="amount-btn" onclick="minus(1)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg></button>
                        </div>
                    </article>
                    <article class="cart-item">
                        <img src="https://dl.airtable.com/.attachments/bae9208dc34f35128749ecda5b999e84/337c285d/phone-3_h2s6fo.png" alt="Samsung Galaxy S8"><div><h4>Xiaomi Redmi Note 2</h4>
                            <h4 class="item-price" id="price-3">$599.99</h4>
                            <button class="remove-btn" onclick="remove(2)">remove</button>
                        </div>
                        <div>
                            <button class="amount-btn" onclick="plus(2)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"></path></svg></button>
                            <p class="amount"></p><button class="amount-btn" onclick="minus(2)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg></button>
                        </div>
                    </article>
                    <article class="cart-item">
                        <img src="https://dl.airtable.com/.attachments/91ee456448cef47deec553a2ea3fa8ad/b08bec68/phone-2_ohtt5s.png" alt="Samsung Galaxy S8"><div><h4>Samsung Galaxy S7</h4>
                            <h4 class="item-price" id="price-4">$699.99</h4>
                            <button class="remove-btn" onclick="remove(3)">remove</button>
                        </div>
                        <div>
                            <button class="amount-btn" onclick="plus(3)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"></path></svg></button>
                            <p class="amount"></p><button class="amount-btn" onclick="minus(3)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg></button>
                        </div>
                    </article>
                </div>
                <div class="footer">
                    <hr>
                    <div class="cart-total">
                        <h4>total <span id="total">$</span></h4>
                    </div>
                    
                    <button class="btn clear-btn">clear cart</button>

                </div>
            </section>
        </div>
    </div>
    <script>
        var data = [
            {
                name: "Samsung Galaxy S8",
                price: 399.99,
                img: "https://dl.airtable.com/.attachments/64b266ad865098befbda3c3577a773c9/24497852/yedjpkwxljtb75t3tezl.png",
                qty: 1
            },
            {
                name: "Google Pixel",
                price: 499.99,
                img: "https://dl.airtable.com/.attachments/91c88ae8c1580e2b762ecb3f73ed1eed/a633139a/phone-1_gvesln.png",
                qty: 1
            },
            {
                name: "Xiaomi Redmi Note 2",
                price: 599.99,
                img: "https://dl.airtable.com/.attachments/bae9208dc34f35128749ecda5b999e84/337c285d/phone-3_h2s6fo.png",
                qty: 1
            },
            {
                name: "Samsung Galaxy S7",
                price: 699.99,
                img: "https://dl.airtable.com/.attachments/91ee456448cef47deec553a2ea3fa8ad/b08bec68/phone-2_ohtt5s.png",
                qty: 1
            },
        ]

        if(localStorage.getItem('key') == null){
            var a = [1, 1, 1, 1];
        }
        else{
            var a = [+localStorage.getItem(0),+localStorage.getItem(1),+localStorage.getItem(2),+localStorage.getItem(3)]
        }
        
        var count = 0;
        var price = [399.99, 499.99, 599.99, 699.99];
        
        let x = document.getElementsByClassName("amount");
        let t = document.getElementsByClassName("cart-item");

        let y = document.getElementById("count-x")
        let z = document.getElementById("total")


        var total = price.reduce(function(total, value, index){
            return total + (value*a[index]);
        },0)
        
        z.innerHTML = total.toFixed(2);
       
       for (let index = 0; index < x.length; index++) {
        const element = x[index];
        element.innerHTML = a[index];
        count += a[index];
        y.innerHTML = count;
        
       }
       
        function plus(index){

            a[index] +=1;
            x[index].innerHTML = a[index];
            count = count +1;          
            y.innerHTML = count;
            // total = total + (a[index]*price[index]);
            // console.log(total)
            total = total + price[index];
            z.innerHTML = total.toFixed(2);
            localStorage.setItem(index, a[index]);
            localStorage.setItem('key', count);
        }
        function minus(index){
           const value = a[index] -1;
           if(value==0){
            t[index].style.display = "none";
           }
            a[index] -=1;
            x[index].innerHTML = a[index];
            count = count - 1;
            y.innerHTML = count;
            total = total - price[index];
            z.innerHTML = total.toFixed(2);
            localStorage.setItem(index, a[index]);
            localStorage.setItem('key', count);
            
        }
       
        function remove(index){
            t[index].style.display = "none"
            count = count - a[index]
            y.innerHTML = count;
            total = total - (a[index]*price[index])
            z.innerHTML = total.toFixed(2);
            localStorage.setItem('key', count);
            localStorage.setItem(index, a[index]);
            localStorage.setItem('key', count);

        }

    </script>
</body>
</html>